<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="StudyRoom.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    BackgroundColor="{DynamicResource PageBackgroundColor}"
    Padding="20">

    <ScrollView>
        <VerticalStackLayout Spacing="16">

            <Label Text="Study Room — Pomodoro"
                   FontSize="24"
                   HorizontalOptions="Center" />

            <Frame Padding="20" CornerRadius="20" HasShadow="True">
                <VerticalStackLayout Spacing="6" HorizontalOptions="Center">
                    <Label Text="{Binding CurrentStateLabel}"
                           FontSize="18"
                           TextColor="{DynamicResource Primary}"
                           HorizontalOptions="Center" />
                    <Label Text="{Binding TimeLeftDisplay}"
                           FontSize="64"
                           FontAttributes="Bold"
                           HorizontalOptions="Center" />
                    <ProgressBar Progress="{Binding Progress}" HeightRequest="6" />
                    <Label Text="{Binding CycleLabel}" FontSize="12" Opacity="0.7" HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Frame>

            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="12">
                <Button Grid.Column="0" Text="{Binding StartPauseButtonText}" Command="{Binding StartPauseCommand}" />
                <Button Grid.Column="1" Text="Reset" Command="{Binding ResetCommand}" />
                <Button Grid.Column="2" Text="Skip" Command="{Binding SkipCommand}" />
            </Grid>

            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="12">
                <Button Grid.Column="0" Text="Focus" Command="{Binding SetFocusCommand}" />
                <Button Grid.Column="1" Text="Short Break" Command="{Binding SetShortBreakCommand}" />
                <Button Grid.Column="2" Text="Long Break" Command="{Binding SetLongBreakCommand}" />
            </Grid>

            <Frame Padding="16" CornerRadius="16" HasShadow="True">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Durations (minutes)" FontAttributes="Bold" />
                    <Grid ColumnDefinitions="2*,*,auto" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="10" RowSpacing="8">
                        <Label Grid.Row="0" Grid.Column="0" Text="Focus" VerticalTextAlignment="Center" />
                        <Entry Grid.Row="0" Grid.Column="1" Text="{Binding FocusMinutes}" Keyboard="Numeric" />
                        <Stepper Grid.Row="0" Grid.Column="2" Minimum="1" Maximum="180" Increment="1"
                                 Value="{Binding FocusMinutes}" />

                        <Label Grid.Row="1" Grid.Column="0" Text="Short Break" VerticalTextAlignment="Center" />
                        <Entry Grid.Row="1" Grid.Column="1" Text="{Binding ShortBreakMinutes}" Keyboard="Numeric" />
                        <Stepper Grid.Row="1" Grid.Column="2" Minimum="1" Maximum="60" Increment="1"
                                 Value="{Binding ShortBreakMinutes}" />

                        <Label Grid.Row="2" Grid.Column="0" Text="Long Break" VerticalTextAlignment="Center" />
                        <Entry Grid.Row="2" Grid.Column="1" Text="{Binding LongBreakMinutes}" Keyboard="Numeric" />
                        <Stepper Grid.Row="2" Grid.Column="2" Minimum="1" Maximum="120" Increment="1"
                                 Value="{Binding LongBreakMinutes}" />
                    </Grid>
                    <Label Text="Tip: After every 4 focus sessions, you’ll get a long break automatically."
                           FontSize="12" Opacity="0.7"/>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
